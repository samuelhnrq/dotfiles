[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh

if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
    source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

# ZPLUG START
source ~/.zplug/init.zsh

zplug "romkatv/powerlevel10k", as:theme, depth:1
zplug "modules/environment", from:prezto
zplug "modules/editor", from:prezto
zplug "modules/history", from:prezto
zplug "modules/completion", from:prezto

if ! zplug check --verbose; then
    printf "Install? [y/N]: "
    if read -q; then
        echo
        zplug install
    fi
fi

zplug load
# ZPLUG END

# Some basic environment

export EDITOR=vim
export VOLTA_HOME="$HOME/.volta"
export PATH="$VOLTA_HOME/bin:$HOME/.local/bin:$PATH"

{{ if eq .chezmoi.os "linux" -}}
{{   if (.chezmoi.kernel.osrelease | lower | contains "microsoft") }}
# WSL Section
export GIT_SSH_COMMAND="/mnt/c/WINDOWS/System32/OpenSSH/ssh.exe"
export GPG_TTY=$TTY

{{   end }}
# Generic LINUX section

{{ else if eq .chezmoi.os "darwin" -}}
# MACOS Section
eval "$(/opt/homebrew/bin/brew shellenv)"
eval "$(chezmoi completion zsh)"
export PATH="/opt/homebrew/opt/python3/libexec/bin:$PATH"
export ZSH_DISABLE_COMPFIX="true"

{{ end -}}

if which pyenv > /dev/null; then
    eval "$(pyenv init -)"
fi

# vim: set syntax=zsh:

